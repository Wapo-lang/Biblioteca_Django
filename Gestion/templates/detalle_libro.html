{% extends "index.html" %}
{% block contenido %}
<div class="container mt-4 animate__animated animate__fadeIn">
    <div class="library-card">
        <h2 class="library-title">ðŸ“– Detalle: {{ libro.titulo }}</h2>
        <hr>
        <p><strong>Autor:</strong> {{ libro.autor }}</p>
        <p><strong>ISBN:</strong> {{ libro.isbn|default:"No registrado" }}</p>
        <p><strong>DescripciÃ³n:</strong> {{ libro.descripcion|default:"Sin descripciÃ³n disponible." }}</p>
        
        <p>
            <strong>Stock:</strong> 
            {% if libro.ejemplares_disponibles > 0 %}
                <span class="badge bg-success">{{ libro.ejemplares_disponibles }} de {{ libro.cantidad_total }} disponibles</span>
            {% else %}
                <span class="badge bg-danger">Agotado (0 de {{ libro.cantidad_total }})</span>
            {% endif %}
        </p>
        
        <div class="mt-4">
            <a href="{% url 'libro_list' %}" class="btn btn-secondary">Volver</a>
            
            {% if perms.Gestion.change_libro %}
                <a href="{% url 'libro_editar' libro.pk %}" class="btn btn-warning">Editar</a>
            {% endif %}

            {% if libro.ejemplares_disponibles > 0 %}
                <a href="{% url 'crear_prestamo' %}?libro_id={{ libro.id }}" class="btn btn-primary shadow-sm">
                    Solicitar PrÃ©stamo
                </a>
            {% else %}
                <button class="btn btn-secondary" disabled>
                    ðŸš« No hay ejemplares
                </button>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}